{% load static get_setting %}
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand"
            href="{% url 'index' %}">{% get_setting "APP_NAME" %}</a>

        <button class="navbar-toggler collapsed"
            type="button"
            data-toggle="collapse"
            data-target="#mainMenu"
            aria-controls="navbarsExampleDefault"
            aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
        </button>

        <div class="collapse navbar-collapse"
            id="mainMenu">
            {% if user.is_authenticated %}

            <div class="navbar-nav form-inline ml-auto">
                <label class="sr-only"
                    for="search-text">Search</label>
                <div class="input-group mr-2 mb-2 mb-sm-0">
                    <input type="text"
                        class="form-control"
                        id="search-text"
                        placeholder="search...">
                    <div class="input-group-append">
                        <a href="{% url 'blog:search_result' %}"
                            id="search-button"
                            class="btn btn-light">
                            <i class="fas fa-search"></i>
                        </a>
                    </div>
                </div>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"
                        href="#"
                        id="userMenu"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false">
                        {{ user.username }}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right"
                        aria-labelledby="userMenu">
                        <a class="dropdown-item"
                            href="{% url 'account:change_password' %}">Change password</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item"
                            href="{% url 'account:logout' %}">Log out</a>
                    </div>
                </li>
            </div>

            {% else %}
            <div class="form-inline ml-auto">
                <label class="sr-only"
                    for="search-text">Search</label>
                <div class="input-group mr-2 mb-2 mb-sm-0">
                    <input type="text"
                        class="form-control"
                        id="search-text"
                        placeholder="search...">
                    <div class="input-group-append">
                        <a href="{% url 'blog:search_result' %}"
                            id="search-button"
                            class="btn btn-light">
                            <i class="fas fa-search"></i>
                        </a>
                    </div>
                </div>
                <a href="{% url 'account:login' %}"
                    class="btn btn-outline-light">log in</a>
                <a href="{% url 'account:signup' %}"
                    class="btn btn-info ml-2">sign up</a>
            </div>
            {% endif %}
        </div>
    </div>
</nav>